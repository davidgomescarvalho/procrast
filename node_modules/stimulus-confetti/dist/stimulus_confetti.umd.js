!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("canvas-confetti")):"function"==typeof define&&define.amd?define(["exports","canvas-confetti"],e):e((t||self).stimulusConfetti={},t.canvasConfetti)}(this,function(t,e){function n(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}var r=/*#__PURE__*/n(e);function o(){return o=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},o.apply(this,arguments)}function i(t,e){return i=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},i(t,e)}function a(t){return t.replace(/(?:[_-])([a-z0-9])/g,(t,e)=>e.toUpperCase())}function s(t){return t.charAt(0).toUpperCase()+t.slice(1)}function c(t,e){const n=u(t);return Array.from(n.reduce((t,n)=>(function(t,e){const n=t[e];return Array.isArray(n)?n:[]}(n,e).forEach(e=>t.add(e)),t),new Set))}function u(t){const e=[];for(;t;)e.push(t),t=Object.getPrototypeOf(t);return e.reverse()}function l([t,e],n){return function(t){const e=`${r=t.token,r.replace(/([A-Z])/g,(t,e)=>`-${e.toLowerCase()}`)}-value`,n=function(t){const e=function(t){const e=f(t.typeObject.type);if(!e)return;const n=p(t.typeObject.default);if(e!==n)throw new Error(`The specified default value for the Stimulus Value "${t.controller?`${t.controller}.${t.token}`:t.token}" must match the defined type "${e}". The provided default value of "${t.typeObject.default}" is of type "${n}".`);return e}({controller:t.controller,token:t.token,typeObject:t.typeDefinition}),n=p(t.typeDefinition),r=f(t.typeDefinition),o=e||n||r;if(o)return o;throw new Error(`Unknown value type "${t.controller?`${t.controller}.${t.typeDefinition}`:t.token}" for "${t.token}" value`)}(t);var r;return{type:n,key:e,name:a(e),get defaultValue(){return function(t){const e=f(t);if(e)return d[e];const n=t.default;return void 0!==n?n:t}(t.typeDefinition)},get hasCustomDefaultValue(){return void 0!==p(t.typeDefinition)},reader:h[n],writer:y[n]||y.default}}({controller:n,token:t,typeDefinition:e})}function f(t){switch(t){case Array:return"array";case Boolean:return"boolean";case Number:return"number";case Object:return"object";case String:return"string"}}function p(t){switch(typeof t){case"boolean":return"boolean";case"number":return"number";case"string":return"string"}return Array.isArray(t)?"array":"[object Object]"===Object.prototype.toString.call(t)?"object":void 0}(()=>{try{!function(){const t=function(t){function e(){return Reflect.construct(t,arguments,new.target)}return e.prototype=Object.create(t.prototype,{constructor:{value:e}}),Reflect.setPrototypeOf(e,t),e}(function(){this.a.call(this)});t.prototype.a=function(){},new t}()}catch(t){return t=>class extends t{}}})();const d={get array(){return[]},boolean:!1,number:0,get object(){return{}},string:""},h={array(t){const e=JSON.parse(t);if(!Array.isArray(e))throw new TypeError(`expected value of type "array" but instead got value "${t}" of type "${p(e)}"`);return e},boolean:t=>!("0"==t||"false"==String(t).toLowerCase()),number:t=>Number(t),object(t){const e=JSON.parse(t);if(null===e||"object"!=typeof e||Array.isArray(e))throw new TypeError(`expected value of type "object" but instead got value "${t}" of type "${p(e)}"`);return e},string:t=>t},y={default:function(t){return`${t}`},array:g,object:g};function g(t){return JSON.stringify(t)}class b{constructor(t){this.context=t}static get shouldLoad(){return!0}get application(){return this.context.application}get scope(){return this.context.scope}get element(){return this.scope.element}get identifier(){return this.scope.identifier}get targets(){return this.scope.targets}get classes(){return this.scope.classes}get data(){return this.scope.data}initialize(){}connect(){}disconnect(){}dispatch(t,{target:e=this.element,detail:n={},prefix:r=this.identifier,bubbles:o=!0,cancelable:i=!0}={}){const a=new CustomEvent(r?`${r}:${t}`:t,{detail:n,bubbles:o,cancelable:i});return e.dispatchEvent(a),a}}b.blessings=[function(t){return c(t,"classes").reduce((t,e)=>{return Object.assign(t,{[`${n=e}Class`]:{get(){const{classes:t}=this;if(t.has(n))return t.get(n);{const e=t.getAttributeName(n);throw new Error(`Missing attribute "${e}"`)}}},[`${n}Classes`]:{get(){return this.classes.getAll(n)}},[`has${s(n)}Class`]:{get(){return this.classes.has(n)}}});var n},{})},function(t){return c(t,"targets").reduce((t,e)=>{return Object.assign(t,{[`${n=e}Target`]:{get(){const t=this.targets.find(n);if(t)return t;throw new Error(`Missing target element "${n}" for "${this.identifier}" controller`)}},[`${n}Targets`]:{get(){return this.targets.findAll(n)}},[`has${s(n)}Target`]:{get(){return this.targets.has(n)}}});var n},{})},function(t){const e=function(t,e){return u(t).reduce((t,e)=>(t.push(...function(t,e){const n=t.values;return n?Object.keys(n).map(t=>[t,n[t]]):[]}(e)),t),[])}(t),n={valueDescriptorMap:{get(){return e.reduce((t,e)=>{const n=l(e,this.identifier),r=this.data.getAttributeNameForKey(n.key);return Object.assign(t,{[r]:n})},{})}}};return e.reduce((t,e)=>Object.assign(t,function(t,e){const n=l(t,void 0),{key:r,name:o,reader:i,writer:a}=n;return{[o]:{get(){const t=this.data.get(r);return null!==t?i(t):n.defaultValue},set(t){void 0===t?this.data.delete(r):this.data.set(r,a(t))}},[`has${s(o)}`]:{get(){return this.data.has(r)||n.hasCustomDefaultValue}}}}(e)),n)}],b.targets=[],b.values={};var v=function(t){return void 0===t&&(t={}),Object.keys(t).map(function(e){return e+":"+t[e]}).join(";")},m=/*#__PURE__*/function(t){var e,n;function a(){for(var e,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))||this).clicked=!1,e.canvasElement=null,e}n=t,(e=a).prototype=Object.create(n.prototype),e.prototype.constructor=e,i(e,n);var s,c,u=a.prototype;return u.spray=function(t){var e=this;t.preventDefault(),this.log("Spraying"),this.getStyle(t).then(function(){e.log("Finished animation"),e.followValue&&(!1===e.clicked&&e.followLink(),e.clicked=!0)})},u.getStyle=function(t){switch(this.animationValue){case"basic":default:return this.basic(t);case"school-pride":return this.schoolPride(t);case"stars":return this.stars(t)}},u.basic=function(t){return this.log("Basic started"),this.instance({particleCount:this.particleCountValue,startVelocity:this.startVelocityValue,spread:this.spreadValue,ticks:this.ticksValue,origin:{x:t.clientX/window.innerWidth,y:t.clientY/window.innerHeight}})},u.stars=function(t){var e=this;this.log("Stars started");var n={spread:this.spreadValue,ticks:50,gravity:0,decay:.94,startVelocity:this.startVelocityValue,shapes:["star"],colors:["FFE400","FFBD00","E89400","FFCA6C","FDFFB8"],origin:{x:t.clientX/window.innerWidth,y:t.clientY/window.innerHeight}};return new Promise(function(t){setTimeout(function(){e.instance(o({},n,{particleCount:e.particleCountValue,shapes:["star"]}))},70),e.instance(o({},n,{particleCount:e.particleCountValue,shapes:["star"]})).then(function(){e.log("Stars ended"),t()})})},u.schoolPride=function(t){var e=this;return this.log("School pride started"),new Promise(function(t){var n=Date.now()+1e3*e.durationValue,r=[e.firstColorValue,e.secondColorValue],o=e;!function e(){o.instance({particleCount:2,angle:60,spread:55,origin:{x:0},colors:r}),o.instance({particleCount:2,angle:120,spread:55,origin:{x:1},colors:r}),Date.now()<n?requestAnimationFrame(e):(o.log("School pride ended"),t())}()})},u.followLink=function(){var t=this;this.log("Following link");var e=document.createElement("a");e.style.cssText=v({opacity:0,display:"hidden"}),e.href=this.context.element.href,e.target=this.context.element.target,document.body.appendChild(e),e.click(),this.log("Followed link"),setTimeout(function(){t.log("Reset state"),t.clicked=!1},1)},u.log=function(t){this.debugValue&&console.log("[Stimulus confetti] "+t)},s=a,(c=[{key:"canvas",get:function(){if(this.canvasElement)return this.canvasElement;var t=document.createElement("canvas");return t.style.cssText=v({position:"fixed",top:0,right:0,bottom:0,left:0,width:"100%",height:"100%","pointer-events":"none","z-index":"9999"}),document.body.appendChild(t),this.canvasElement=t,this.canvasElement}},{key:"instance",get:function(){return r.default.create(this.canvas,{resize:!0,useWorker:!0})}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(s.prototype,c),Object.defineProperty(s,"prototype",{writable:!1}),a}(b);m.targets=["element"],m.values={follow:{type:Boolean,default:!0},animation:{type:String,default:"basic"},duration:{type:Number,default:5},firstColor:{type:String,default:"#0886DE"},secondColor:{type:String,default:"#FF6154"},particleCount:{type:Number,default:100},startVelocity:{type:Number,default:20},spread:{type:Number,default:360},ticks:{type:Number,default:90},debug:{type:Boolean,default:!1}},t.Confetti=m});
//# sourceMappingURL=stimulus_confetti.umd.js.map
